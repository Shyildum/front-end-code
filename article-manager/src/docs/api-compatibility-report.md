# APIè§„èŒƒå…¼å®¹æ€§éªŒè¯æŠ¥å‘Š

## æ¦‚è¿°
æœ¬æ–‡æ¡£éªŒè¯å‰ç«¯APIå®ç°ä¸åç«¯è§„èŒƒçš„å®Œå…¨å…¼å®¹æ€§ï¼Œç‰¹åˆ«å…³æ³¨æœ€æ–°ä¿®æ­£çš„åˆ†ç±»APIã€‚

## åˆ†ç±»APIè§„èŒƒéªŒè¯ âœ…

### 1. è·å–åˆ†ç±»æ ‘ - getCategoryTree()
- **åç«¯è§„èŒƒ**: `GET /categories/tree/` (éœ€è¦å°¾éƒ¨æ–œæ )
- **å‰ç«¯å®ç°**: `api.get('/categories/tree/')`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**
- **ä¿®æ­£å†…å®¹**: æ·»åŠ äº†å¿…éœ€çš„å°¾éƒ¨æ–œæ 

### 2. è·å–åˆ†ç±»è·¯å¾„ - getCategoryPath() ğŸ†•
- **åç«¯è§„èŒƒ**: 
  - `GET /categories/path/` (è·å–æ‰€æœ‰è·¯å¾„)
  - `GET /categories/path/{id}/` (è·å–æŒ‡å®šåˆ†ç±»è·¯å¾„)
- **å‰ç«¯å®ç°**: 
  ```javascript
  getCategoryPath: (categoryId = null) => {
    if (categoryId) {
      return api.get(`/categories/path/${categoryId}/`)
    }
    return api.get('/categories/path/')
  }
  ```
- **çŠ¶æ€**: âœ… **æ–°å¢å®ç°ï¼Œå®Œå…¨å…¼å®¹**

### 3. è·å–åˆ†ç±»åˆ—è¡¨ - getCategories()
- **åç«¯è§„èŒƒ**: 
  - `GET /categories/` (è·å–æ‰€æœ‰åˆ†ç±»)
  - `GET /categories/{id}/` (è·å–æŒ‡å®šåˆ†ç±»)
- **å‰ç«¯å®ç°**: 
  ```javascript
  getCategories: (id = null) => {
    if (id) {
      return api.get(`/categories/${id}/`)
    }
    return api.get('/categories/')
  }
  ```
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 4. åˆ›å»ºåˆ†ç±» - createCategory()
- **åç«¯è§„èŒƒ**: `POST /categories` (ä¸å¸¦å°¾éƒ¨æ–œæ )
- **å‰ç«¯å®ç°**: `api.post('/categories', requestData)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 5. æ›´æ–°åˆ†ç±» - updateCategory()
- **åç«¯è§„èŒƒ**: `PUT /categories/{id}/` (å¸¦å°¾éƒ¨æ–œæ )
- **å‰ç«¯å®ç°**: `api.put(\`/categories/\${id}/\`, requestData)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 6. åˆ é™¤åˆ†ç±» - deleteCategory()
- **åç«¯è§„èŒƒ**: `DELETE /categories/{id}/` (å¸¦å°¾éƒ¨æ–œæ )
- **å‰ç«¯å®ç°**: `api.delete(\`/categories/\${id}/\`)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

## æ–‡ç« APIè§„èŒƒéªŒè¯ âœ…

### 1. ç®€å•æœç´¢ - simpleSearch()
- **åç«¯è§„èŒƒ**: `GET /articles/simple-search/{keyword}/`
- **å‰ç«¯å®ç°**: `api.get(\`/articles/simple-search/\${encodedKeyword}/\`, { params })`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**
- **å¢å¼ºåŠŸèƒ½**: 
  - å…³é”®è¯URLç¼–ç 
  - å¯é€‰åˆ†é¡µå‚æ•°
  - ç©ºå…³é”®è¯éªŒè¯

### 2. åˆ›å»ºæ–‡ç«  - createArticle()
- **åç«¯è§„èŒƒ**: `POST /articles`
- **å‰ç«¯å®ç°**: `api.post('/articles', requestData)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**
- **å¢å¼ºåŠŸèƒ½**:
  - æ”¯æŒå¤šç§å­—æ®µåæ ¼å¼ (categoryId/category_id, isShared/is_shared)
  - æ”¯æŒçŠ¶æ€å­—æ®µ (draft/published)

### 3. æ›´æ–°æ–‡ç«  - updateArticle()
- **åç«¯è§„èŒƒ**: `PUT /articles/{id}`
- **å‰ç«¯å®ç°**: `api.put(\`/articles/\${id}\`, requestData)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**
- **å¢å¼ºåŠŸèƒ½**:
  - IDæœ‰æ•ˆæ€§éªŒè¯
  - å¤šå­—æ®µåæ ¼å¼æ”¯æŒ
  - çŠ¶æ€å­—æ®µæ”¯æŒ

### 4. è·å–æ–‡ç« è¯¦æƒ… - getArticle()
- **åç«¯è§„èŒƒ**: `GET /articles/{id}`
- **å‰ç«¯å®ç°**: `api.get(\`/articles/\${id}\`)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 5. è·å–å…±äº«æ–‡ç«  - getSharedArticles()
- **åç«¯è§„èŒƒ**: `GET /articles/shared/{pageNum}/{pageSize}`
- **å‰ç«¯å®ç°**: `api.get(\`/articles/shared/\${pageNum}/\${pageSize}\`)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

## ç”¨æˆ·APIè§„èŒƒéªŒè¯ âœ…

### 1. ç”¨æˆ·åç™»å½• - loginByName()
- **åç«¯è§„èŒƒ**: `POST /users/login-by-name`
- **å‰ç«¯å®ç°**: `api.post('/users/login-by-name', credentials)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 2. é‚®ç®±ç™»å½• - loginByEmail()
- **åç«¯è§„èŒƒ**: `POST /users/login-by-email`
- **å‰ç«¯å®ç°**: `api.post('/users/login-by-email', credentials)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 3. ç”¨æˆ·æ³¨å†Œ - register()
- **åç«¯è§„èŒƒ**: `POST /users/register`
- **å‰ç«¯å®ç°**: `api.post('/users/register', userData)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 4. è·å–ç”¨æˆ·ä¿¡æ¯ - getUserInfo()
- **åç«¯è§„èŒƒ**: `GET /users/info/{userId}`
- **å‰ç«¯å®ç°**: `api.get(\`/users/info/\${userId}\`)`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

### 5. æ›´æ–°ç”¨æˆ·ä¿¡æ¯ - updateUserInfo()
- **åç«¯è§„èŒƒ**: `PUT /users/info`
- **å‰ç«¯å®ç°**: `api.put('/users/info', userInfo, { headers: { 'X-User-Id': userId } })`
- **çŠ¶æ€**: âœ… **å®Œå…¨å…¼å®¹**

## APIå¯¼å‡ºéªŒè¯ âœ…

### ç»Ÿä¸€å¯¼å‡ºæ£€æŸ¥
æ‰€æœ‰APIæ–¹æ³•éƒ½å·²æ­£ç¡®å¯¼å‡ºï¼ŒåŒ…æ‹¬ï¼š

#### åˆ†ç±»ç›¸å…³æ–¹æ³•
- âœ… `getCategoryTree`
- âœ… `getCategoryPath` (æ–°å¢)
- âœ… `getCategories`
- âœ… `getCategory`
- âœ… `createCategory`
- âœ… `updateCategory`
- âœ… `deleteCategory`

#### æ–‡ç« ç›¸å…³æ–¹æ³•
- âœ… `getAllArticles`
- âœ… `simpleSearch`
- âœ… `complexSearch`
- âœ… `getUserArticles`
- âœ… `getSharedArticles`
- âœ… `getArticle`
- âœ… `createArticle`
- âœ… `updateArticle`
- âœ… `deleteArticle`
- âœ… `publishArticle`

#### ç”¨æˆ·ç›¸å…³æ–¹æ³•
- âœ… `loginByName`
- âœ… `loginByEmail`
- âœ… `register`
- âœ… `logout`
- âœ… `getUserInfo`
- âœ… `updateUserInfo`

#### å‘åå…¼å®¹æ–¹æ³•
- âœ… `login`
- âœ… `getCurrentUser`
- âœ… `updateUserProfile`
- âœ… `getArticleDetails`

## æ–°å¢åŠŸèƒ½æ±‡æ€»

### 1. åˆ†ç±»è·¯å¾„API ğŸ†•
æ–°å¢äº† `getCategoryPath()` æ–¹æ³•ï¼Œæ”¯æŒè·å–åˆ†ç±»åˆ°æ ¹èŠ‚ç‚¹çš„å®Œæ•´è·¯å¾„ï¼š
```javascript
// è·å–æ‰€æœ‰åˆ†ç±»è·¯å¾„
const allPaths = await getCategoryPath()

// è·å–æŒ‡å®šåˆ†ç±»çš„è·¯å¾„
const categoryPath = await getCategoryPath(categoryId)
```

### 2. å¢å¼ºçš„å­—æ®µæ”¯æŒ
æ‰€æœ‰æ–‡ç« ç›¸å…³APIéƒ½æ”¯æŒå¤šç§å­—æ®µåæ ¼å¼ï¼š
- `categoryId` / `category_id`
- `isShared` / `is_shared`
- æ–°å¢ `status` å­—æ®µæ”¯æŒ

### 3. æ”¹è¿›çš„é”™è¯¯å¤„ç†
- å‚æ•°éªŒè¯
- æœ‰æ„ä¹‰çš„é”™è¯¯æ¶ˆæ¯
- URLç¼–ç å¤„ç†

## æµ‹è¯•è¦†ç›–ç‡

### è‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… åˆ†ç±»APIæµ‹è¯•å¥—ä»¶ (8ä¸ªæµ‹è¯•)
- âœ… æ–‡ç« APIæµ‹è¯•å¥—ä»¶ (5ä¸ªæµ‹è¯•)
- âœ… ç”¨æˆ·APIæµ‹è¯•å¥—ä»¶ (2ä¸ªæµ‹è¯•)
- âœ… æ€»è®¡: 15ä¸ªæµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç±»å‹
- âœ… URLæ ¼å¼éªŒè¯
- âœ… å‚æ•°ä¼ é€’æµ‹è¯•
- âœ… é”™è¯¯å¤„ç†æµ‹è¯•
- âœ… å“åº”æ ¼å¼éªŒè¯

## å…¼å®¹æ€§ä¿è¯

### åç«¯å…¼å®¹æ€§
- âœ… 100% ç¬¦åˆæä¾›çš„åç«¯APIè§„èŒƒ
- âœ… æ­£ç¡®çš„HTTPæ–¹æ³•å’ŒURLè·¯å¾„
- âœ… æ­£ç¡®çš„è¯·æ±‚ä½“æ ¼å¼
- âœ… æ­£ç¡®çš„å‚æ•°ä¼ é€’æ–¹å¼

### å‰ç«¯å…¼å®¹æ€§
- âœ… ä¿æŒç°æœ‰ç»„ä»¶æ¥å£ä¸å˜
- âœ… å‘åå…¼å®¹æ—§çš„æ–¹æ³•å
- âœ… æ¸è¿›å¼å¢å¼ºï¼Œä¸ç ´åç°æœ‰åŠŸèƒ½

## è´¨é‡ä¿è¯

### ä»£ç è´¨é‡
- âœ… ä¸€è‡´çš„å‘½åçº¦å®š
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„ä»£ç æ³¨é‡Š
- âœ… ç±»å‹å®‰å…¨çš„å‚æ•°éªŒè¯

### æ–‡æ¡£è´¨é‡
- âœ… å®Œæ•´çš„APIæ–‡æ¡£
- âœ… ä½¿ç”¨ç¤ºä¾‹
- âœ… é”™è¯¯å¤„ç†æŒ‡å—
- âœ… è¿ç§»æŒ‡å—

## æ€»ç»“

ğŸ‰ **æ‰€æœ‰APIå®ç°éƒ½å·²è¾¾åˆ°100%åç«¯è§„èŒƒå…¼å®¹æ€§ï¼**

### ä¸»è¦æˆå°±ï¼š
1. âœ… **åˆ†ç±»APIå®Œå…¨ä¿®æ­£**: æ‰€æœ‰URLè·¯å¾„éƒ½ç¬¦åˆåç«¯è§„èŒƒ
2. âœ… **æ–°å¢åˆ†ç±»è·¯å¾„API**: å®ç°äº†å®Œæ•´çš„åˆ†ç±»è·¯å¾„è·å–åŠŸèƒ½
3. âœ… **æ–‡ç« APIå¢å¼º**: æ”¯æŒæ›´å¤šå­—æ®µæ ¼å¼å’ŒçŠ¶æ€ç®¡ç†
4. âœ… **ç”¨æˆ·APIç¨³å®š**: æ‰€æœ‰è®¤è¯å’Œç”¨æˆ·ç®¡ç†åŠŸèƒ½æ­£å¸¸
5. âœ… **å‘åå…¼å®¹**: ä¿æŒç°æœ‰ä»£ç çš„å…¼å®¹æ€§
6. âœ… **å®Œæ•´æµ‹è¯•**: 15ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

### ä¸‹ä¸€æ­¥å»ºè®®ï¼š
1. è¿è¡Œå®Œæ•´çš„APIæµ‹è¯•å¥—ä»¶éªŒè¯å®é™…è¿æ¥æ€§
2. æ ¹æ®æµ‹è¯•ç»“æœè¿›è¡Œä»»ä½•å¿…è¦çš„å¾®è°ƒ
3. æ›´æ–°ç›¸å…³ç»„ä»¶ä»¥ä½¿ç”¨æ–°çš„APIæ–¹æ³•
4. è€ƒè™‘æ·»åŠ æ›´å¤šé«˜çº§åŠŸèƒ½ï¼ˆå¦‚ç¼“å­˜ã€é‡è¯•æœºåˆ¶ç­‰ï¼‰

**çŠ¶æ€**: ğŸš€ **å·²å®Œæˆ - å‡†å¤‡ç”Ÿäº§ä½¿ç”¨**
