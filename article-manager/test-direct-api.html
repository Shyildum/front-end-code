<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç›´æ¥æµ‹è¯•æ–‡ç« API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .info { background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 10px 0; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ç›´æ¥æµ‹è¯•æ–‡ç« APIè°ƒç”¨</h1>
    
    <div class="info">
        <p><strong>è¯´æ˜:</strong> è¿™ä¸ªé¡µé¢å°†ç›´æ¥æµ‹è¯• <code>GET /api/v1/articles/all/1/10</code> APIè°ƒç”¨</p>
        <p><strong>è¯·æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Consoleæ ‡ç­¾æŸ¥çœ‹è¯¦ç»†æ—¥å¿—</strong></p>
    </div>
    
    <button onclick="runTest()">ğŸš€ å¼€å§‹æµ‹è¯•API</button>
    <button onclick="checkStorage()">ğŸ” æ£€æŸ¥localStorage</button>
    <button onclick="clearConsole()">ğŸ§¹ æ¸…ç©ºæ§åˆ¶å°</button>
    
    <div id="result"></div>

    <script>
        function runTest() {
            console.clear();
            
            // åŠ è½½å¹¶æ‰§è¡Œè°ƒè¯•è„šæœ¬
            const script = document.createElement('script');
            script.src = './debug-direct-api.js';
            document.head.appendChild(script);
            
            // ç§»é™¤è„šæœ¬ä»¥é¿å…é‡å¤åŠ è½½
            setTimeout(() => {
                document.head.removeChild(script);
            }, 1000);
        }
        
        function checkStorage() {
            const userId = localStorage.getItem('userId');
            const user = localStorage.getItem('user');
            
            console.log('ğŸ’¾ localStorageå†…å®¹æ£€æŸ¥:');
            console.log('userId:', userId);
            console.log('user:', user);
            
            if (user) {
                try {
                    console.log('ç”¨æˆ·ä¿¡æ¯è§£æ:', JSON.parse(user));
                } catch (e) {
                    console.error('ç”¨æˆ·ä¿¡æ¯JSONè§£æå¤±è´¥:', e);
                }
            }
            
            // æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
            document.getElementById('result').innerHTML = `
                <h3>localStorageå†…å®¹:</h3>
                <p><strong>userId:</strong> ${userId || 'âŒ æœªæ‰¾åˆ°'}</p>
                <p><strong>user:</strong> ${user ? 'âœ… å·²æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°'}</p>
                ${user ? `<pre>${JSON.stringify(JSON.parse(user), null, 2)}</pre>` : ''}
            `;
        }
        
        function clearConsole() {
            console.clear();
            document.getElementById('result').innerHTML = '';
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥å­˜å‚¨
        window.addEventListener('load', checkStorage);
    </script>
</body>
</html>
